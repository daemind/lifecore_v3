# =====================================
# FACTORY PRODUCTION LINE - Configuration
# =====================================
#
# Ligne de production avec postes et robots.
# Chargeable via: load_system("configs/factory.yaml")

name: "Factory Production Line"
dims: 8  # [pos_x, pos_y, arm_x, arm_y, arm_z, grip, temp, energy]

dim_names:
  - "conveyor_pos"
  - "station_id"
  - "arm_x"
  - "arm_y"
  - "arm_z"
  - "gripper"
  - "temperature"
  - "energy_used"

# === RESSOURCES ===
resources:
  - name: electricity
    capacity: 1000.0  # kW

  - name: compressed_air
    capacity: 500.0  # PSI

  - name: conveyor_slots
    capacity: 20

# === LOIS ===
laws:
  # Limite de mouvement bras
  - type: speed_limit
    max: 2.0  # m/s
    dims: [2, 3, 4]

  # Espace de travail
  - type: boundary
    min: [0, 0, -1, -1, 0, 0, 0, 0]
    max: [10, 5, 1, 1, 1, 1, 100, 1000]

  # Zone chaude (four)
  - type: no_fly_zone
    zones:
      - center: [5, 2.5, 0]
        radius: 0.5

# === HIÉRARCHIE ===
hierarchy:
  name: production_line
  resources: [electricity, conveyor_slots]
  
  children:
    # Station 1: Assemblage
    - name: station
      count: 3
      domain: [0, 1]  # Position sur convoyeur
      resources: [electricity]
      
      children:
        - name: robot_arm
          domain: [2, 3, 4, 5]  # Bras et gripper
          capabilities:
            - name: arm_speed
              dims: [2, 3, 4]
              max: 2.0
            - name: grip_force
              dims: [5]
              max: 1.0
          
          needs:
            - type: homeostatic
              name: return_to_home
              dim: 2
              target: 0.0
              priority: 0.5
    
    # Système de refroidissement
    - name: cooling_system
      domain: [6]  # Température
      resources: [electricity]
      needs:
        - type: homeostatic
          name: maintain_temp
          dim: 6
          target: 25.0
          priority: 3.0
